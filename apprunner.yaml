version: 1.0
runtime: python3

build:
  commands:
    build:
      - pip install --no-cache-dir -r backend/requirements.txt

run:
  runtime-version: python3
  command: gunicorn -w 4 -k gthread --threads 8 --timeout 120 -b 0.0.0.0:8080 backend.app:app
  network:
    port: 8080
    env: PORT
  env:
    - name: ALLOWED_ORIGINS
      value: "*"
  secrets:
    - name: DATABASE_URL
      value-from: arn:aws:secretsmanager:us-east-2:970597967953:secret:fsbi/manual-db-url-aYe0gC
