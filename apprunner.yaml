version: 1.0
runtime: python3
build:
  commands:
    - pip install --no-cache-dir -r backend/requirements.txt

run:
  command: gunicorn -w 4 -k gthread --threads 8 --timeout 120 -b 0.0.0.0:8080 backend.app:app
  network:
    port: 8080
  env:
    variables:
      ALLOWED_ORIGINS: "*"                # allow all origins (later restrict to your Vercel domain)
    secrets:
      DATABASE_URL: fsbi/mannual-db-url   # this matches the secret name you created in Secrets Manager
