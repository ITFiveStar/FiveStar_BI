version: 1.0
runtime: python3

build:
  commands:
    build:
      - pip install --no-cache-dir -r backend/requirements.txt

run:
  command: gunicorn -w 4 -k gthread --threads 8 --timeout 120 -b 0.0.0.0:8080 backend.app:app
  network:
    port: 8080
  env:
    variables:
      ALLOWED_ORIGINS: "*"   # tighten later to your Vercel domain
    secrets:
      - name: DATABASE_URL
        value: fsbi/mannual-db-url   # your Secrets Manager secret name
